{"error":{},"level":"error","message":"uncaughtException: Cannot read property '_id' of undefined\nTypeError: Cannot read property '_id' of undefined\n    at Socket.<anonymous> (G:\\Git\\Octa\\octaCourses\\backend\\config\\socket.config.js:116:37)\n    at Socket.emit (events.js:311:20)\n    at Socket.emit (G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js:142:10)\n    at Socket.onclose (G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js:454:8)\n    at Socket.ondisconnect (G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js:418:8)\n    at Socket.onpacket (G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js:340:12)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\client.js:214:16\n    at processTicksAndRejections (internal/process/task_queues.js:79:11)","stack":"TypeError: Cannot read property '_id' of undefined\n    at Socket.<anonymous> (G:\\Git\\Octa\\octaCourses\\backend\\config\\socket.config.js:116:37)\n    at Socket.emit (events.js:311:20)\n    at Socket.emit (G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js:142:10)\n    at Socket.onclose (G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js:454:8)\n    at Socket.ondisconnect (G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js:418:8)\n    at Socket.onpacket (G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js:340:12)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\client.js:214:16\n    at processTicksAndRejections (internal/process/task_queues.js:79:11)","exception":true,"date":"Wed Jul 22 2020 00:10:53 GMT+0200 (Eastern European Standard Time)","process":{"pid":10308,"uid":null,"gid":null,"cwd":"G:\\Git\\Octa\\octaCourses","execPath":"C:\\Program Files\\nodejs\\node.exe","version":"v12.16.1","argv":["C:\\Program Files\\nodejs\\node.exe","G:\\Git\\Octa\\octaCourses\\server.js"],"memoryUsage":{"rss":50909184,"heapTotal":24494080,"heapUsed":22608336,"external":19682620}},"os":{"loadavg":[0,0,0],"uptime":6047},"trace":[{"column":37,"file":"G:\\Git\\Octa\\octaCourses\\backend\\config\\socket.config.js","function":null,"line":116,"method":null,"native":false},{"column":20,"file":"events.js","function":"Socket.emit","line":311,"method":"emit","native":false},{"column":10,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js","function":"Socket.emit","line":142,"method":"emit","native":false},{"column":8,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js","function":"Socket.onclose","line":454,"method":"onclose","native":false},{"column":8,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js","function":"Socket.ondisconnect","line":418,"method":"ondisconnect","native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\socket.js","function":"Socket.onpacket","line":340,"method":"onpacket","native":false},{"column":16,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\socket.io\\lib\\client.js","function":null,"line":214,"method":null,"native":false},{"column":11,"file":"internal/process/task_queues.js","function":"processTicksAndRejections","line":79,"method":null,"native":false}]}
{"meta":{"error":{"code":"ERR_HTTP_HEADERS_SENT"},"level":"error","message":"uncaughtException: Cannot set headers after they are sent to the client\nError [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:526:11)\n    at ServerResponse.header (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:170:12)\n    at ServerResponse.json (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:267:15)\n    at handleErrorsInProdMode (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:51:25)\n    at handler (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:84:9)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at Function.process_params (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:335:12)\n    at next (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:275:10)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:67:12)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:365:14)","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:526:11)\n    at ServerResponse.header (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:170:12)\n    at ServerResponse.json (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:267:15)\n    at handleErrorsInProdMode (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:51:25)\n    at handler (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:84:9)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at Function.process_params (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:335:12)\n    at next (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:275:10)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:67:12)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:365:14)","exception":true,"date":"Wed Jul 22 2020 09:49:26 GMT+0200 (Eastern European Standard Time)","process":{"pid":16764,"uid":null,"gid":null,"cwd":"G:\\Git\\Octa\\octaCourses","execPath":"C:\\Program Files\\nodejs\\node.exe","version":"v12.16.1","argv":["C:\\Program Files\\nodejs\\node.exe","G:\\Git\\Octa\\octaCourses\\server.js"],"memoryUsage":{"rss":50610176,"heapTotal":23969792,"heapUsed":22295320,"external":19761803}},"os":{"loadavg":[0,0,0],"uptime":40761},"trace":[{"column":11,"file":"_http_outgoing.js","function":"ServerResponse.setHeader","line":526,"method":"setHeader","native":false},{"column":10,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.header","line":771,"method":"header","native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.send","line":170,"method":"send","native":false},{"column":15,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.json","line":267,"method":"json","native":false},{"column":25,"file":"G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js","function":"handleErrorsInProdMode","line":51,"method":null,"native":false},{"column":9,"file":"G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js","function":"handler","line":84,"method":null,"native":false},{"column":5,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js","function":"Layer.handle_error","line":71,"method":"handle_error","native":false},{"column":13,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"trim_prefix","line":315,"method":null,"native":false},{"column":7,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":null,"line":284,"method":null,"native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"Function.process_params","line":335,"method":"process_params","native":false},{"column":10,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"next","line":275,"method":null,"native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js","function":"Layer.handle_error","line":67,"method":"handle_error","native":false},{"column":13,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"trim_prefix","line":315,"method":null,"native":false},{"column":7,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":null,"line":284,"method":null,"native":false},{"column":14,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"param","line":354,"method":null,"native":false},{"column":14,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"param","line":365,"method":null,"native":false}],"req":{"url":"/courses/1/checkout","headers":{"host":"localhost:3000","connection":"keep-alive","content-length":"40","accept":"application/json, text/plain, */*","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36","content-type":"application/json","origin":"http://localhost:4200","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:4200/course/1","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,ar;q=0.8"},"method":"POST","httpVersion":"1.1","originalUrl":"/courses/1/checkout","query":{}}},"level":"error","message":"middlewareError"}
{"meta":{"error":{"code":"ERR_HTTP_HEADERS_SENT"},"level":"error","message":"uncaughtException: Cannot set headers after they are sent to the client\nError [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:526:11)\n    at ServerResponse.header (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:170:12)\n    at ServerResponse.json (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:267:15)\n    at handleErrorsInProdMode (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:50:25)\n    at handler (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:83:9)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at Function.process_params (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:335:12)\n    at next (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:275:10)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:67:12)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:365:14)","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:526:11)\n    at ServerResponse.header (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:170:12)\n    at ServerResponse.json (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:267:15)\n    at handleErrorsInProdMode (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:50:25)\n    at handler (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:83:9)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at Function.process_params (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:335:12)\n    at next (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:275:10)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:67:12)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:365:14)","exception":true,"date":"Wed Jul 22 2020 09:51:49 GMT+0200 (Eastern European Standard Time)","process":{"pid":16220,"uid":null,"gid":null,"cwd":"G:\\Git\\Octa\\octaCourses","execPath":"C:\\Program Files\\nodejs\\node.exe","version":"v12.16.1","argv":["C:\\Program Files\\nodejs\\node.exe","G:\\Git\\Octa\\octaCourses\\server.js"],"memoryUsage":{"rss":50737152,"heapTotal":23969792,"heapUsed":21665296,"external":19658697}},"os":{"loadavg":[0,0,0],"uptime":40903},"trace":[{"column":11,"file":"_http_outgoing.js","function":"ServerResponse.setHeader","line":526,"method":"setHeader","native":false},{"column":10,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.header","line":771,"method":"header","native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.send","line":170,"method":"send","native":false},{"column":15,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.json","line":267,"method":"json","native":false},{"column":25,"file":"G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js","function":"handleErrorsInProdMode","line":50,"method":null,"native":false},{"column":9,"file":"G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js","function":"handler","line":83,"method":null,"native":false},{"column":5,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js","function":"Layer.handle_error","line":71,"method":"handle_error","native":false},{"column":13,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"trim_prefix","line":315,"method":null,"native":false},{"column":7,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":null,"line":284,"method":null,"native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"Function.process_params","line":335,"method":"process_params","native":false},{"column":10,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"next","line":275,"method":null,"native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js","function":"Layer.handle_error","line":67,"method":"handle_error","native":false},{"column":13,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"trim_prefix","line":315,"method":null,"native":false},{"column":7,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":null,"line":284,"method":null,"native":false},{"column":14,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"param","line":354,"method":null,"native":false},{"column":14,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"param","line":365,"method":null,"native":false}],"req":{"url":"/courses/1/checkout","headers":{"host":"localhost:3000","connection":"keep-alive","content-length":"40","accept":"application/json, text/plain, */*","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36","content-type":"application/json","origin":"http://localhost:4200","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:4200/course/1","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,ar;q=0.8"},"method":"POST","httpVersion":"1.1","originalUrl":"/courses/1/checkout","query":{}}},"level":"error","message":"middlewareError"}
{"meta":{"error":{"code":"ERR_HTTP_HEADERS_SENT"},"level":"error","message":"uncaughtException: Cannot set headers after they are sent to the client\nError [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:526:11)\n    at ServerResponse.header (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:170:12)\n    at ServerResponse.json (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:267:15)\n    at handleErrorsInProdMode (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:50:25)\n    at handler (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:83:9)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at Function.process_params (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:335:12)\n    at next (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:275:10)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:67:12)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:365:14)","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:526:11)\n    at ServerResponse.header (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:170:12)\n    at ServerResponse.json (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:267:15)\n    at handleErrorsInProdMode (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:50:25)\n    at handler (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:83:9)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at Function.process_params (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:335:12)\n    at next (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:275:10)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:67:12)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:365:14)","exception":true,"date":"Wed Jul 22 2020 09:56:19 GMT+0200 (Eastern European Standard Time)","process":{"pid":14576,"uid":null,"gid":null,"cwd":"G:\\Git\\Octa\\octaCourses","execPath":"C:\\Program Files\\nodejs\\node.exe","version":"v12.16.1","argv":["C:\\Program Files\\nodejs\\node.exe","G:\\Git\\Octa\\octaCourses\\server.js"],"memoryUsage":{"rss":51994624,"heapTotal":23969792,"heapUsed":21600432,"external":19660145}},"os":{"loadavg":[0,0,0],"uptime":41174},"trace":[{"column":11,"file":"_http_outgoing.js","function":"ServerResponse.setHeader","line":526,"method":"setHeader","native":false},{"column":10,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.header","line":771,"method":"header","native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.send","line":170,"method":"send","native":false},{"column":15,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.json","line":267,"method":"json","native":false},{"column":25,"file":"G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js","function":"handleErrorsInProdMode","line":50,"method":null,"native":false},{"column":9,"file":"G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js","function":"handler","line":83,"method":null,"native":false},{"column":5,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js","function":"Layer.handle_error","line":71,"method":"handle_error","native":false},{"column":13,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"trim_prefix","line":315,"method":null,"native":false},{"column":7,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":null,"line":284,"method":null,"native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"Function.process_params","line":335,"method":"process_params","native":false},{"column":10,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"next","line":275,"method":null,"native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js","function":"Layer.handle_error","line":67,"method":"handle_error","native":false},{"column":13,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"trim_prefix","line":315,"method":null,"native":false},{"column":7,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":null,"line":284,"method":null,"native":false},{"column":14,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"param","line":354,"method":null,"native":false},{"column":14,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"param","line":365,"method":null,"native":false}],"req":{"url":"/courses/1/checkout","headers":{"host":"localhost:3000","connection":"keep-alive","content-length":"40","accept":"application/json, text/plain, */*","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36","content-type":"application/json","origin":"http://localhost:4200","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:4200/course/1","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,ar;q=0.8"},"method":"POST","httpVersion":"1.1","originalUrl":"/courses/1/checkout","query":{}}},"level":"error","message":"middlewareError"}
{"meta":{"error":{"code":"ERR_HTTP_HEADERS_SENT"},"level":"error","message":"uncaughtException: Cannot set headers after they are sent to the client\nError [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:526:11)\n    at ServerResponse.header (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:170:12)\n    at ServerResponse.json (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:267:15)\n    at handleErrorsInProdMode (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:51:25)\n    at handler (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:84:9)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at Function.process_params (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:335:12)\n    at next (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:275:10)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:67:12)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:365:14)","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:526:11)\n    at ServerResponse.header (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:170:12)\n    at ServerResponse.json (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:267:15)\n    at handleErrorsInProdMode (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:51:25)\n    at handler (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:84:9)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at Function.process_params (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:335:12)\n    at next (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:275:10)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:67:12)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:365:14)","exception":true,"date":"Wed Jul 22 2020 09:57:01 GMT+0200 (Eastern European Standard Time)","process":{"pid":6452,"uid":null,"gid":null,"cwd":"G:\\Git\\Octa\\octaCourses","execPath":"C:\\Program Files\\nodejs\\node.exe","version":"v12.16.1","argv":["C:\\Program Files\\nodejs\\node.exe","G:\\Git\\Octa\\octaCourses\\server.js"],"memoryUsage":{"rss":68341760,"heapTotal":58572800,"heapUsed":23295040,"external":19770622}},"os":{"loadavg":[0,0,0],"uptime":41215},"trace":[{"column":11,"file":"_http_outgoing.js","function":"ServerResponse.setHeader","line":526,"method":"setHeader","native":false},{"column":10,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.header","line":771,"method":"header","native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.send","line":170,"method":"send","native":false},{"column":15,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.json","line":267,"method":"json","native":false},{"column":25,"file":"G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js","function":"handleErrorsInProdMode","line":51,"method":null,"native":false},{"column":9,"file":"G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js","function":"handler","line":84,"method":null,"native":false},{"column":5,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js","function":"Layer.handle_error","line":71,"method":"handle_error","native":false},{"column":13,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"trim_prefix","line":315,"method":null,"native":false},{"column":7,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":null,"line":284,"method":null,"native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"Function.process_params","line":335,"method":"process_params","native":false},{"column":10,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"next","line":275,"method":null,"native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js","function":"Layer.handle_error","line":67,"method":"handle_error","native":false},{"column":13,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"trim_prefix","line":315,"method":null,"native":false},{"column":7,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":null,"line":284,"method":null,"native":false},{"column":14,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"param","line":354,"method":null,"native":false},{"column":14,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"param","line":365,"method":null,"native":false}],"req":{"url":"/courses/1/checkout","headers":{"host":"localhost:3000","connection":"keep-alive","content-length":"40","accept":"application/json, text/plain, */*","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36","content-type":"application/json","origin":"http://localhost:4200","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:4200/course/1","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,ar;q=0.8"},"method":"POST","httpVersion":"1.1","originalUrl":"/courses/1/checkout","query":{}}},"level":"error","message":"middlewareError"}
{"meta":{"error":{"code":"ERR_HTTP_HEADERS_SENT"},"level":"error","message":"uncaughtException: Cannot set headers after they are sent to the client\nError [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:526:11)\n    at ServerResponse.header (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:170:12)\n    at ServerResponse.json (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:267:15)\n    at handleErrorsInProdMode (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:50:25)\n    at handler (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:83:9)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at Function.process_params (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:335:12)\n    at next (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:275:10)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:67:12)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:365:14)","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (_http_outgoing.js:526:11)\n    at ServerResponse.header (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:771:10)\n    at ServerResponse.send (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:170:12)\n    at ServerResponse.json (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js:267:15)\n    at handleErrorsInProdMode (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:50:25)\n    at handler (G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js:83:9)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:71:5)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at Function.process_params (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:335:12)\n    at next (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:275:10)\n    at Layer.handle_error (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js:67:12)\n    at trim_prefix (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:315:13)\n    at G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:284:7\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:354:14)\n    at param (G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js:365:14)","exception":true,"date":"Wed Jul 22 2020 09:58:11 GMT+0200 (Eastern European Standard Time)","process":{"pid":5432,"uid":null,"gid":null,"cwd":"G:\\Git\\Octa\\octaCourses","execPath":"C:\\Program Files\\nodejs\\node.exe","version":"v12.16.1","argv":["C:\\Program Files\\nodejs\\node.exe","G:\\Git\\Octa\\octaCourses\\server.js"],"memoryUsage":{"rss":50778112,"heapTotal":24494080,"heapUsed":21530744,"external":19660145}},"os":{"loadavg":[0,0,0],"uptime":41286},"trace":[{"column":11,"file":"_http_outgoing.js","function":"ServerResponse.setHeader","line":526,"method":"setHeader","native":false},{"column":10,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.header","line":771,"method":"header","native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.send","line":170,"method":"send","native":false},{"column":15,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\response.js","function":"ServerResponse.json","line":267,"method":"json","native":false},{"column":25,"file":"G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js","function":"handleErrorsInProdMode","line":50,"method":null,"native":false},{"column":9,"file":"G:\\Git\\Octa\\octaCourses\\backend\\middlewares\\error.handler.middleware.js","function":"handler","line":83,"method":null,"native":false},{"column":5,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js","function":"Layer.handle_error","line":71,"method":"handle_error","native":false},{"column":13,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"trim_prefix","line":315,"method":null,"native":false},{"column":7,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":null,"line":284,"method":null,"native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"Function.process_params","line":335,"method":"process_params","native":false},{"column":10,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"next","line":275,"method":null,"native":false},{"column":12,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\layer.js","function":"Layer.handle_error","line":67,"method":"handle_error","native":false},{"column":13,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"trim_prefix","line":315,"method":null,"native":false},{"column":7,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":null,"line":284,"method":null,"native":false},{"column":14,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"param","line":354,"method":null,"native":false},{"column":14,"file":"G:\\Git\\Octa\\octaCourses\\node_modules\\express\\lib\\router\\index.js","function":"param","line":365,"method":null,"native":false}],"req":{"url":"/courses/1/checkout","headers":{"host":"localhost:3000","connection":"keep-alive","content-length":"40","accept":"application/json, text/plain, */*","dnt":"1","user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36","content-type":"application/json","origin":"http://localhost:4200","sec-fetch-site":"same-site","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:4200/course/1","accept-encoding":"gzip, deflate, br","accept-language":"en-US,en;q=0.9,ar;q=0.8"},"method":"POST","httpVersion":"1.1","originalUrl":"/courses/1/checkout","query":{}}},"level":"error","message":"middlewareError"}
